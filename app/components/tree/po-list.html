<link rel="import" href="../../../bower_components/iron-list/iron-list.html">
<link rel="import" href="po-line.html">

<dom-module id="po-list">
    <template>
        <div class="scrollable">
            <iron-list scroll-target="scrollable" items="[[groupPOs(filteredProofObligations)]]" as="line">
                <template>
                    <div>
                        <template is="dom-if" if="[[line.group]]">
                            <div class="headline"><span class="file">[[line.parent]]</span> / <span class="function">[[line.value]]</span> </div>
                        </template>

                        <template is="dom-if" if="[[!line.group]]">
                            <po-line item="[[line.value]]"></po-line>
                        </template>
                    </div>

                </template>
            </div>
        </iron-list>

    </template>

    <script>
        Polymer({
            is: 'po-list',

            properties: {

                filter: {
                    type: Object,
                    notify: true
                },

                filteredProofObligations: {
                    type: Object,
                    notify: true
                }
            },

            _isGroup: function(item) {
                return item.type != "po";
            },

            groupPOs: function(pos) {
                var groups = kt.Globals.groupProofObligationsByFileFunctions(pos);
                var unzipped = kt.Globals.unzipPoGroup(groups);
                return unzipped;
            },

            // jumpToSource: function(event) {     var item = event.currentTarget.data;     this.fire("jump-to-src", item); },

            _showFunctionName: function(fname) {
                return true;
                //return this.filter.functionName!=fname;
            },

            _clickListener: function(e) {}

        });
    </script>
</dom-module>
