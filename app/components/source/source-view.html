<dom-module id="source-view">
    <template>

        <!-- source view [[file.relativePath]]
        data: [[lines]] -->

        <iron-list id="functionslist" items="[[lines]]" selection-enabled on-selected-item-changed="_onLineSelected">
            <template>
                <div class="code-line"><span class="violation"></span>
                    <!-- <span class="info"></span> -->
                    <span class="info">[[index]]</span>

                    <pre class="text">[[item.text]]</pre>
                </div>
            </template>
        </iron-list>

    </template>



    <script>
        Polymer({
            is: 'source-view',

            properties: {
                currentProject: Object,

                file: {
                    type: Object,
                    notify: true,
                    observer: '_fileChanged'
                },

                lines: {
                    type: String
                }

            },

            _fileChanged: function(newFile, oldFile) {
                if (this.file && !this.file.dir) {
                    this.currentProject.loadFile(this.file.relativePath).then(function(fileContents) {

                        this.set("lines", fileContents.lines);

                    }.bind(this));
                }

            }

        });
    </script>

</dom-module>
