osx_image: xcode9.3
dist: trusty
sudo: required
language: node_js
node_js: "8"

env:
  global:
    - ELECTRON_CACHE=$HOME/.cache/electron
    - ELECTRON_BUILDER_CACHE=$HOME/.cache/electron-builder

os:
  - osx
  
cache:
  directories:
  - node_modules
  - $HOME/.cache/electron
  - $HOME/.cache/electron-builder
  - $HOME/.npm/_prebuilds
  
script:
- sudo security dump-keychain /Library/Keychains/System.keychain
- npm test
- npm run release

branches:
  - master
  - dev-2018
  - certificates
  
notifications:
  slack: kestreltechnology:QcOSfR0bHUi92kqkmioIsT4H
  
